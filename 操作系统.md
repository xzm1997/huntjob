# 进程与线程

## 进程线程是什么
- 进程是资源分配的最小单位，同一时刻执行的进程数不会超过核心数。
- 线程是CPU调度的最小单位
- 协程是一种用户态的轻量级线程。

### 讲解
- 做个简单的比喻：进程=火车，线程=车厢
- **线程在进程下行进**（单纯的车厢无法运行）
- **一个进程可以包含多个线程**（一辆火车可以有多个车厢）
- **不同进程间数据很难共享**（一辆火车上的乘客很难换到另外一辆火车，比如站点换乘）
- **同一进程下不同线程间数据很易共享**（A车厢换到B车厢很容易）
- **进程要比线程消耗更多的计算机资源**（采用多列火车相比多个车厢更耗资源）
- **进程间不会相互影响，一个线程挂掉将导致整个进程挂掉**（一列火车不会影响到另外一列火车，但是如果一列火车上中间的一节车厢着火了，将影响到所有车厢）
- **进程可以拓展到多机，进程最多适合多核**（不同火车可以开在多个轨道上，同一火车的车厢不能在行进的不同的轨道上）
- **进程使用的内存地址可以上锁，即一个线程使用某些共享内存时，其他线程必须等它结束，才能使用这一块内存。**（比如火车上的洗手间）－"互斥锁"
- **进程使用的内存地址可以限定使用量**（比如火车上的餐厅，最多只允许多少人进入，如果满了需要在门口等，等有人出来了才能进去）－“信号量”

## 多线程多进程怎么通信
用于进程间通讯(IPC)的四种不同技术: 
1. 消息传递(管道,FIFO,posix和system v消息队列) 
2. 同步(互斥锁,条件变量,读写锁,文件和记录锁,Posix和System V信号灯) 
3. 共享内存区(匿名共享内存区,有名Posix共享内存区,有名System V共享内存区) 
4. 过程调用(Solaris门,Sun RPC) 
